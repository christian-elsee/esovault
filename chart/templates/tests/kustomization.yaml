apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: "{{ .Values.name }}"
metadata:
  name: tests
sortOptions:
  order: fifo
commonAnnotations:
  "helm.sh/hook": test
  "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded,hook-failed

commonLabels:
  app.kubernetes.io/name: "{{ .Values.name }}"
  helm.sh/chart: "{{ .Chart.Name }}-{{ .Values.checksum }}" 
  app.kubernetes.io/managed-by: "{{ .Release.Service }}"
  app.kubernetes.io/instance: "{{ .Release.Name }}"
  app.kubernetes.io/version: "{{ .Values.checksum }}"
  app.kubernetes.io/component: secrets

resources:
- externalsecret.checksum.yaml
- pod.test-env-from-secret.yaml

